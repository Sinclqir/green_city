(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{1675:(e,s,t)=>{Promise.resolve().then(t.bind(t,8007))},3384:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]])},3477:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});var r=t(2115),a=t(5695);function n(){let e=(0,a.useSearchParams)();return(0,r.useEffect)(()=>{if("form"===e.get("scrollTo")){let e=document.getElementById("form-idea-section");e&&e.scrollIntoView({behavior:"smooth"})}},[e]),null}},5695:(e,s,t)=>{"use strict";var r=t(8999);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},8007:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h,dynamic:()=>u});var r=t(5155),a=t(2115),n=t(5695),l=t(6874),o=t.n(l),c=t(3384),i=t(3477),d=t(7358);let u="force-dynamic",m=d.env.NEXT_PUBLIC_API_URL||"http://localhost:8000";function h(){let[e,s]=(0,a.useState)(""),[t,l]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),h=(0,n.useRouter)(),x=async s=>{s.preventDefault(),u("");let r=new URLSearchParams;r.append("username",e),r.append("password",t);try{let e=await fetch("".concat(m,"/token"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r});if(e.ok){let s=await e.json();localStorage.setItem("token",s.access_token),u("Connexion r\xe9ussie ! Redirection..."),setTimeout(()=>{h.push("/")},1e3)}else u("Email ou mot de passe incorrect.")}catch(e){u("Impossible de contacter le serveur.")}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100 flex flex-col",children:[(0,r.jsx)(a.Suspense,{fallback:null,children:(0,r.jsx)(i.A,{})}),(0,r.jsx)("header",{className:"w-full px-4 py-6 flex items-center sticky top-0 bg-gray-100 z-10",children:(0,r.jsxs)(o(),{href:"/",className:"flex items-center space-x-2 group",children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-gray-800 group-hover:text-green-500 transition-colors",children:["Green",(0,r.jsx)("span",{className:"text-green-500",children:"City"})]}),(0,r.jsx)(c.A,{className:"h-6 w-6 text-green-500 ml-1"})]})}),(0,r.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,r.jsxs)("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-center text-gray-800",children:"Connexion"}),(0,r.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"Adresse email"}),(0,r.jsx)("input",{id:"email",name:"email",type:"email",placeholder:"Email",className:"mt-1 w-full border px-4 py-2 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",value:e,onChange:e=>s(e.target.value),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",children:"Mot de passe"}),(0,r.jsx)("input",{id:"password",name:"password",type:"password",placeholder:"Mot de passe",className:"mt-1 w-full border px-4 py-2 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",value:t,onChange:e=>l(e.target.value),required:!0})]}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-300",children:"Se connecter"})]}),d&&(0,r.jsx)("p",{className:"mt-4 text-center text-sm ".concat(d.includes("incorrect")||d.includes("Impossible")?"text-red-600":"text-green-600"),children:d})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[95,441,684,358],()=>s(1675)),_N_E=e.O()}]);