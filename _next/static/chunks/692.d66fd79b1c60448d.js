"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[692],{1692:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var a=s(5155),r=s(2115),i=s(7119),n=s(3477),o=s(7505);let l=s(7358).env.NEXT_PUBLIC_API_URL||"http://localhost:8000";function c(){let[e,t]=(0,r.useState)(!1),[s,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)([]),[m,x]=(0,r.useState)([]),[h,p]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=localStorage.getItem("token");e&&(async()=>{try{let t=await fetch("".concat(l,"/users/me"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();p(e)}else localStorage.removeItem("token")}catch(e){console.error("Failed to fetch user",e)}})()},[]),(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat(l,"/users/"));if(e.ok){let t=await e.json();u(t)}}catch(e){}})()},[]),(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat(l,"/ideas/"));if(e.ok){let t=await e.json();x(t)}}catch(e){}})()},[]);let g=async e=>{let s=localStorage.getItem("token");if(!s){alert("Vous devez \xeatre connect\xe9 pour soumettre une id\xe9e.");return}c(!0);try{let a=await fetch("".concat(l,"/ideas/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({idea:e})});if(!a.ok)throw Error("Erreur lors de la soumission de l'id\xe9e");let r=await a.json();x([r,...m]),t(!1)}catch(e){alert("Erreur: "+e.message)}finally{c(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Suspense,{fallback:null,children:(0,a.jsx)(n.A,{})}),(0,a.jsx)("section",{id:"testimonials",className:"py-20 bg-gray-50",children:(0,a.jsxs)("div",{className:"container mx-auto px-4",children:[(0,a.jsxs)("div",{className:"text-center mb-16",children:[(0,a.jsx)("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Ce que disent nos utilisateurs"}),(0,a.jsx)("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"D\xe9couvrez les t\xe9moignages de citoyens qui ont transform\xe9 leur ville gr\xe2ce \xe0 GreenCity."})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-8 mb-12",children:[(0,a.jsx)(o.y,{frontIcon:(0,a.jsx)("span",{className:"text-2xl",children:"\uD83C\uDF31"}),frontTitle:"Marie Dubois",frontDescription:"Citoyenne engag\xe9e",backDescription:"GreenCity m'a permis de proposer des id\xe9es concr\xe8tes pour verdir mon quartier. L'\xe9quipe a \xe9t\xe9 tr\xe8s r\xe9active !"}),(0,a.jsx)(o.y,{frontIcon:(0,a.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFE2"}),frontTitle:"\xc9ric Martin",frontDescription:"Urbaniste",backDescription:"En tant qu'urbaniste, j'appr\xe9cie la qualit\xe9 des propositions citoyennes sur cette plateforme."}),(0,a.jsx)(o.y,{frontIcon:(0,a.jsx)("span",{className:"text-2xl",children:"\uD83C\uDF0D"}),frontTitle:"Charles Bernard",frontDescription:"\xc9cologiste",backDescription:"Une excellente initiative pour mobiliser les citoyens autour de l'\xe9cologie urbaine."})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h3",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Id\xe9es de la communaut\xe9"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"D\xe9couvrez les derni\xe8res id\xe9es propos\xe9es par nos utilisateurs"}),(0,a.jsx)("button",{onClick:()=>t(!0),className:"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors",children:"Proposer une id\xe9e"})]}),(0,a.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.slice(0,6).map((e,t)=>{var s,r;return(0,a.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[(0,a.jsx)("p",{className:"text-gray-700 mb-4 line-clamp-3",children:e.idea}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:["Par: ",(null===(s=e.user)||void 0===s?void 0:s.name)||(null===(r=e.user)||void 0===r?void 0:r.email)||"Anonyme"]}),(0,a.jsx)("span",{children:e.created_at?new Date(e.created_at).toLocaleDateString("fr-FR"):"R\xe9cemment"})]})]},e.id||t)})})]})]})}),(0,a.jsx)(i.a,{isOpen:e,onClose:()=>t(!1),onSubmit:g,isSubmitting:s})]})}}}]);